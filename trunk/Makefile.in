#
#  $Id$
#
#  Copyright 2007 The Growl Project. All rights reserved.
#
# This file is under the BSD License, refer to license.txt for details

DEPTH = ../..
topsrcdir = @top_srcdir@
srcdir = @srcdir@
VPATH = @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE = growl

DIRS = public src

XPI_NAME 							 = growl
INSTALL_EXTENSION_ID   = growl@growl.info
XPI_PKGNAME            = growl
USE_EXTENSION_MANIFEST = 1

PREF_JS_EXPORTS = $(srcdir)/defaults/preferences/growl-prefs.js

DIST_FILES = \
  install.rdf \
  license.txt \
  $(NULL)

libs::
	@@echo Copying Framework
	rsync -al $(srcdir)/Growl.framework $(FINAL_TARGET)/

include $(topsrcdir)/config/rules.mk

repackage:
	@@echo Repackaging XPI
	cd $(FINAL_TARGET) && rm -f ../$(XPI_PKGNAME).xpi
	cd $(FINAL_TARGET) && $(ZIP) -ry ../$(XPI_PKGNAME).xpi *
